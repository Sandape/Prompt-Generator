#!/usr/bin/env python3
"""
Prompt Generator å¯åŠ¨è„šæœ¬
"""

import os
import sys
import subprocess

def check_dependencies():
    """æ£€æŸ¥ä¾èµ–æ˜¯å¦å·²å®‰è£…"""
    try:
        import fastapi
        import uvicorn
        import jinja2
        import pillow
        import passlib
        import python_jose
        print("âœ… æ‰€æœ‰ä¾èµ–åŒ…å·²å®‰è£…")
        return True
    except ImportError as e:
        print(f"âŒ ç¼ºå°‘ä¾èµ–åŒ…: {e}")
        print("è¯·è¿è¡Œ: pip install -r requirements.txt")
        return False

def create_directories():
    """åˆ›å»ºå¿…è¦çš„ç›®å½•"""
    directories = ["data", "logs", "static/css", "static/js", "static/images", "templates"]
    for directory in directories:
        os.makedirs(directory, exist_ok=True)
        print(f"âœ… åˆ›å»ºç›®å½•: {directory}")

def start_server():
    """å¯åŠ¨æœåŠ¡å™¨"""
    print("ğŸš€ å¯åŠ¨ Prompt Generator...")
    print("ğŸ“± è®¿é—®åœ°å€: http://localhost:8000")
    print("â¹ï¸  æŒ‰ Ctrl+C åœæ­¢æœåŠ¡å™¨")
    print("-" * 50)

    try:
        import uvicorn
        uvicorn.run("main:app", host="0.0.0.0", port=8000, reload=True)
    except KeyboardInterrupt:
        print("\nğŸ‘‹ æœåŠ¡å™¨å·²åœæ­¢")
    except Exception as e:
        print(f"âŒ å¯åŠ¨å¤±è´¥: {e}")

if __name__ == "__main__":
    print("ğŸ¯ Prompt Generator å¯åŠ¨å™¨")
    print("=" * 50)

    if not check_dependencies():
        sys.exit(1)

    create_directories()

    start_server()
